<template>
  <div
    aria-label="Illustration depicting a message broker architecture. System A sends messages, represented by arrows, to a central message broker component. The broker then forwards these messages to System B."
    class="syncSvgParent w-full sm:w-9/12"
    role="img"
    tabindex="0"
  >
    <svg
      height="127px"
      viewBox="-0.5 -0.5 356 127"
      width="356px"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <defs />
      <g>
        <g data-cell-id="0">
          <g data-cell-id="1">
            <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-107">
              <g />
              <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-108">
                <g>
                  <svg style="height: 77px; width: 77px" viewBox="0 0 850 850" x="-0.5" y="21.5">
                    <g>
                      <path
                        class="top"
                        d="M 230 280 l 157.18 72.352 c 20.668 9.5156 54.496 9.5156 75.145 0 l 132.64 -61.055 l 217.53 -103.74 c -4.5742 -3.4336 -9.25 -6.5156 -14.191 -8.7734 l -317.09 -146.01 c -30.992 -14.277 -81.746 -14.277 -112.76 0 l -317.19 146.01 c -5.0703 2.3164 -9.8672 5.5234 -14.543 9.0625 z"
                      />
                      <path
                        class="left"
                        d="m 423.34 420.96 c 0 -22.801 -16.902 -49.16 -37.574 -58.695 l -239.42 -110.15 c -0.207 -0.082 -0.3711 -0.25 -0.5781 -0.3516 l -108.25 -49.883 v 372.25 c 0 34.137 25.387 73.738 56.398 88.035 l 317.19 146.03 c 2.8125 1.3047 5.957 2.3398 9.0625 3.3945 l 3.1445 -193.8 l 0.0039 -196.82 z"
                      />
                      <path
                        class="right"
                        d="m 708.59 250.96 c -0.4336 0.2266 -0.8086 0.5391 -1.2812 0.7656 l -239.46 110.21 c -20.691 9.4961 -37.574 35.918 -37.574 58.676 v 162.12 l 0.4766 -0.0195 l -0.7461 229.8 c 4.4688 -1.3438 8.7109 -2.9375 12.621 -4.7383 l 317.17 -146.03 c 30.992 -14.277 56.398 -53.875 56.398 -88.035 l -0.0625 -372.39 z"
                      />
                    </g>
                  </svg>
                </g>
              </g>
              <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-109">
                <g>
                  <rect
                    fill="none"
                    height="30"
                    pointer-events="all"
                    stroke="none"
                    width="60"
                    x="8.5"
                    y="96"
                  />
                </g>
                <g>
                  <g transform="translate(-0.5 -0.5)">
                    <switch>
                      <foreignObject
                        height="100%"
                        pointer-events="none"
                        style="overflow: visible; text-align: left"
                        width="100%"
                      >
                        <div
                          style="
                            display: flex;
                            align-items: unsafe center;
                            justify-content: unsafe center;
                            width: 58px;
                            height: 1px;
                            padding-top: 111px;
                            margin-left: 10px;
                          "
                          xmlns="http://www.w3.org/1999/xhtml"
                        >
                          <div
                            data-drawio-colors="color: rgb(0, 0, 0); "
                            style="box-sizing: border-box; font-size: 0; text-align: center"
                          >
                            <div
                              style="
                                display: inline-block;
                                font-size: 12px;
                                font-family: 'Atkinson Hyperlegible', serif;
                                line-height: 1.2;
                                pointer-events: all;
                                white-space: normal;
                                overflow-wrap: normal;
                              "
                            >
                              System A
                            </div>
                          </div>
                        </div>
                      </foreignObject>
                      <text
                        fill="rgb(0, 0, 0)"
                        font-family='"Helvetica"'
                        font-size="12px"
                        text-anchor="middle"
                        x="39"
                        y="115"
                      >
                        System A
                      </text>
                    </switch>
                  </g>
                </g>
              </g>
            </g>
            <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-110">
              <g />
              <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-111">
                <g>
                  <svg style="height: 77px; width: 77px" viewBox="0 0 850 850" x="277.5" y="20.5">
                    <g>
                      <path
                        class="top"
                        d="M 230 280 l 157.18 72.352 c 20.668 9.5156 54.496 9.5156 75.145 0 l 132.64 -61.055 l 217.53 -103.74 c -4.5742 -3.4336 -9.25 -6.5156 -14.191 -8.7734 l -317.09 -146.01 c -30.992 -14.277 -81.746 -14.277 -112.76 0 l -317.19 146.01 c -5.0703 2.3164 -9.8672 5.5234 -14.543 9.0625 z"
                      />
                      <path
                        class="left"
                        d="m 423.34 420.96 c 0 -22.801 -16.902 -49.16 -37.574 -58.695 l -239.42 -110.15 c -0.207 -0.082 -0.3711 -0.25 -0.5781 -0.3516 l -108.25 -49.883 v 372.25 c 0 34.137 25.387 73.738 56.398 88.035 l 317.19 146.03 c 2.8125 1.3047 5.957 2.3398 9.0625 3.3945 l 3.1445 -193.8 l 0.0039 -196.82 z"
                      />
                      <path
                        class="right"
                        d="m 708.59 250.96 c -0.4336 0.2266 -0.8086 0.5391 -1.2812 0.7656 l -239.46 110.21 c -20.691 9.4961 -37.574 35.918 -37.574 58.676 v 162.12 l 0.4766 -0.0195 l -0.7461 229.8 c 4.4688 -1.3438 8.7109 -2.9375 12.621 -4.7383 l 317.17 -146.03 c 30.992 -14.277 56.398 -53.875 56.398 -88.035 l -0.0625 -372.39 z"
                      />
                    </g>
                  </svg>
                </g>
              </g>
              <g data-cell-id="SUh7fJCfBhAYlD9i4jNa-112">
                <g>
                  <rect
                    fill="none"
                    height="30"
                    pointer-events="all"
                    stroke="none"
                    width="60"
                    x="286.5"
                    y="95"
                  />
                </g>
                <g>
                  <g transform="translate(-0.5 -0.5)">
                    <switch>
                      <foreignObject
                        height="100%"
                        pointer-events="none"
                        style="overflow: visible; text-align: left"
                        width="100%"
                      >
                        <div
                          style="
                            display: flex;
                            align-items: unsafe center;
                            justify-content: unsafe center;
                            width: 58px;
                            height: 1px;
                            padding-top: 110px;
                            margin-left: 288px;
                          "
                          xmlns="http://www.w3.org/1999/xhtml"
                        >
                          <div
                            data-drawio-colors="color: rgb(0, 0, 0); "
                            style="box-sizing: border-box; font-size: 0px; text-align: center"
                          >
                            <div
                              style="
                                display: inline-block;
                                font-size: 12px;
                                font-family: 'Atkinson Hyperlegible', serif;
                                line-height: 1.2;
                                pointer-events: all;
                                white-space: normal;
                                overflow-wrap: normal;
                              "
                            >
                              System B
                            </div>
                          </div>
                        </div>
                      </foreignObject>
                      System B
                    </switch>
                  </g>
                </g>
              </g>
            </g>
            <g data-cell-id="liRYg65jqqzGKRDRGIv0-7">
              <g>
                <path
                  class="arrow"
                  d="M 77 60 L 132.63 60"
                  pointer-events="stroke"
                  stroke-miterlimit="10"
                />
                <path
                  class="arrow"
                  d="M 137.88 60.01 L 130.91 63.57 L 132.63 60.05 L 130.85 56.57 Z"
                  pointer-events="all"
                  stroke-miterlimit="10"
                />
              </g>
            </g>
            <g data-cell-id="liRYg65jqqzGKRDRGIv0-8">
              <g>
                <path
                  class="arrow"
                  d="M 219 60 L 271.63 60"
                  pointer-events="stroke"
                  stroke-miterlimit="10"
                />
                <path
                  class="arrow"
                  d="M 276.88 59.51 L 269.91 63.07 L 271.63 59.55 L 269.85 56.07 Z"
                  pointer-events="all"
                  stroke-miterlimit="10"
                />
              </g>
            </g>
            <g data-cell-id="1AJHg93OHBHO-39x3q-e-1">
              <g />
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-2">
                <g>
                  <rect
                    class="messageBrokerBorders"
                    fill="none"
                    height="120"
                    pointer-events="all"
                    stroke-dasharray="1 4"
                    width="160"
                    x="99"
                    y="0"
                  />
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-3">
                <g />
                <g data-cell-id="1AJHg93OHBHO-39x3q-e-4">
                  <g>
                    <rect
                      class="messageBrokerBackground"
                      height="25"
                      pointer-events="all"
                      width="25"
                      x="99"
                      y="0"
                    />
                  </g>
                </g>
                <g data-cell-id="1AJHg93OHBHO-39x3q-e-5">
                  <g>
                    <rect
                      class="messageBrokerLogo"
                      height="8.83"
                      pointer-events="all"
                      width="14.06"
                      x="106.81"
                      y="8.09"
                    />
                    <path
                      class="messageBrokerLogo"
                      d="M 106.81 8.09 L 113.84 15.31 L 120.88 8.09 M 106.81 16.92 L 111.17 12.5 M 120.88 16.92 L 116.52 12.5"
                      pointer-events="all"
                      stroke-miterlimit="10"
                    />
                  </g>
                </g>
                <g data-cell-id="1AJHg93OHBHO-39x3q-e-6">
                  <g>
                    <path
                      class="messageBrokerLogo"
                      d="M 100.56 9.38 L 106.81 9.38"
                      pointer-events="stroke"
                      stroke-miterlimit="10"
                    />
                  </g>
                </g>
                <g data-cell-id="1AJHg93OHBHO-39x3q-e-7">
                  <g>
                    <path
                      class="messageBrokerLogo"
                      d="M 101.5 10.63 L 106.81 10.63"
                      pointer-events="stroke"
                      stroke-miterlimit="10"
                    />
                  </g>
                </g>
                <g data-cell-id="1AJHg93OHBHO-39x3q-e-8">
                  <g>
                    <path
                      class="messageBrokerLogo"
                      d="M 102.44 11.88 L 106.81 11.88"
                      pointer-events="stroke"
                      stroke-miterlimit="10"
                    />
                  </g>
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-9">
                <g>
                  <rect
                    fill="none"
                    height="25"
                    pointer-events="all"
                    stroke="none"
                    width="130"
                    x="129"
                    y="0"
                  />
                </g>
                <g>
                  <g transform="translate(-0.5 -0.5)">
                    <switch>
                      <foreignObject
                        height="100%"
                        pointer-events="none"
                        style="overflow: visible; text-align: left"
                        width="100%"
                      >
                        <div
                          style="
                            display: flex;
                            align-items: unsafe center;
                            justify-content: unsafe flex-start;
                            width: 128px;
                            height: 1px;
                            padding-top: 13px;
                            margin-left: 131px;
                          "
                          xmlns="http://www.w3.org/1999/xhtml"
                        >
                          <div
                            data-drawio-colors="color: rgb(0, 0, 0); "
                            style="box-sizing: border-box; font-size: 0; text-align: left"
                          >
                            <div
                              style="
                                display: inline-block;
                                font-size: 12px;
                                font-family: 'Atkinson Hyperlegible', serif;
                                line-height: 1.2;
                                pointer-events: all;
                                white-space: normal;
                                overflow-wrap: normal;
                              "
                            >
                              Message Broker
                            </div>
                          </div>
                        </div>
                      </foreignObject>
                      <text
                        fill="rgb(0, 0, 0)"
                        font-family='"Atkinson Hyperlegible"'
                        font-size="12px"
                        x="131"
                        y="16"
                      >
                        Message Broker
                      </text>
                    </switch>
                  </g>
                </g>
              </g>
              <g data-cell-id="g-fGXSuld24DBSo3LxMv-1">
                <g />
              </g>
            </g>
            <g data-cell-id="1AJHg93OHBHO-39x3q-e-17">
              <g />
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-18">
                <g>
                  <path
                    class="queueBackground queuePathColor"
                    d="M 169 25 C 169 22.24 173.48 20 179 20 C 181.65 20 184.2 20.53 186.07 21.46 C 187.95 22.4 189 23.67 189 25 L 189 95 C 189 97.76 184.52 100 179 100 C 173.48 100 169 97.76 169 95 Z"
                    pointer-events="all"
                    stroke-miterlimit="10"
                    transform="rotate(90,179,60)"
                  />
                  <path
                    class="queuePathColor"
                    d="M 189 25 C 189 27.76 184.52 30 179 30 C 173.48 30 169 27.76 169 25"
                    fill="none"
                    pointer-events="all"
                    stroke-miterlimit="10"
                    transform="rotate(90,179,60)"
                  />
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-19">
                <g>
                  <path
                    class="queueTriangle"
                    d="M 197 53.74 L 207 60.01 L 197 66.27 Z"
                    pointer-events="all"
                    stroke="rgb(0, 0, 0)"
                    stroke-miterlimit="10"
                  />
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-20">
                <g>
                  <path
                    class="queueTriangle"
                    d="M 181 53.73 L 191 60 L 181 66.26 Z"
                    pointer-events="all"
                    stroke="rgb(0, 0, 0)"
                    stroke-miterlimit="10"
                  />
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-21">
                <g>
                  <path
                    class="queueTriangle"
                    d="M 165 53.73 L 175 60 L 165 66.26 Z"
                    pointer-events="all"
                    stroke="rgb(0, 0, 0)"
                    stroke-miterlimit="10"
                  />
                </g>
              </g>
              <g data-cell-id="1AJHg93OHBHO-39x3q-e-22">
                <g>
                  <path
                    class="queueTriangle"
                    d="M 149 53.73 L 159 60 L 149 66.26 Z"
                    pointer-events="all"
                    stroke="rgb(0, 0, 0)"
                    stroke-miterlimit="10"
                  />
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </div>
</template>

<script lang="ts" setup>
import { computed } from 'vue'

const props = defineProps(['dark'])

const isDark = computed(() => {
  return props.dark
})

const switchThemeColor = () => {
  if (document) {
    const root = document.querySelector(':root')
    if (root) {
      if (isDark.value) {
        root.style.setProperty('--color', `var(--tw-color-white)`)

        root.style.setProperty('--queueFillColor', `var(--tw-color-gray-200)`)
        root.style.setProperty('--queueTriangleFillColor', `var(--tw-color-gray-100)`)
        root.style.setProperty('--queuePathColor', `var(--tw-color-gray-400)`)

        root.style.setProperty('--messageBrokerBackground', `var(--tw-color-gray-100)`)
        root.style.setProperty('--messageBrokerLogoStroke', `var(--tw-color-gray-700)`)

        root.style.setProperty('--messageBrokerBorders', `var(--tw-color-gray-100)`)

        root.style.setProperty('--themeTop', `var(--tw-color-gray-50)`)
        root.style.setProperty('--themeLeft', `var(--tw-color-gray-200)`)
        root.style.setProperty('--themeRight', `var(--tw-color-gray-400)`)
      } else {
        root.style.setProperty('--color', `var(--tw-color-black)`)

        root.style.setProperty('--queueFillColor', `var(--tw-color-gray-300)`)
        root.style.setProperty('--queueTriangleFillColor', `var(--tw-color-gray-100)`)
        root.style.setProperty('--queuePathColor', `var(--tw-color-black)`)

        root.style.setProperty('--messageBrokerBackground', `var(--tw-color-gray-500)`)
        root.style.setProperty('--messageBrokerLogoStroke', `var(--tw-color-gray-100)`)

        root.style.setProperty('--messageBrokerBorders', `var(--tw-color-gray-900)`)

        root.style.setProperty('--themeTop', `var(--tw-color-gray-500)`)
        root.style.setProperty('--themeLeft', `var(--tw-color-gray-600)`)
        root.style.setProperty('--themeRight', `var(--tw-color-gray-800)`)
      }
    }
  }
}

switchThemeColor()

watch(isDark, () => {
  switchThemeColor()
})
</script>

<style scoped>
.syncSvgParent {
  transition: var(--diagramColorTransition);
  color: var(--color);
}

.queueBackground {
  transition: var(--diagramColorTransition);
  fill: var(--queueFillColor);
}

.queueTriangle {
  transition: var(--diagramColorTransition);
  fill: var(--queueTriangleFillColor);
}

.queuePathColor {
  transition: var(--diagramColorTransition);
  stroke: var(--queuePathColor);
}

.arrow {
  transition: var(--diagramColorTransition);
  stroke: var(--color);
  fill: var(--color);
}

.messageBrokerBackground {
  transition: var(--diagramColorTransition);
  stroke: var(--messageBrokerBackground);
  fill: var(--messageBrokerBackground);
}

.messageBrokerLogo {
  stroke: var(--messageBrokerLogoStroke);
  fill: transparent;
}

.messageBrokerBorders {
  stroke: var(--messageBrokerBorders);
}

.top {
  transition: var(--diagramColorTransition);
  fill: var(--themeTop);
  stroke: black;
  stroke-width: 2;
}

.left {
  transition: var(--diagramColorTransition);
  fill: var(--themeLeft);
  stroke: black;
  stroke-width: 2;
}

.right {
  transition: var(--diagramColorTransition);
  fill: var(--themeRight);
  stroke: black;
  stroke-width: 2;
}
</style>
